import{c as ae,d as Ke,e as le,f as M,h as P,C as Ie,k as hn,E as mn,g as Z,r as $,I as gn,u as Ue,b as at,s as mt,w as H,o as oe,a as Pe,y as vn,l as Je,p as Ot,x as pn,ad as zt,aj as yn,z as Ne,J as K,A as _n,L as I,R as V,O as x,N as p,Y as Ee,T as ve,Z as pe,ak as qt,W as L,al as bn,am as Bt,an as wn,ao as xn,ap as Sn,aq as ot,ar as Cn,M as Q,P as O,U as ye,V as _e,Q as W,as as En,at as Mn,au as kn,av as An,B as Rn,aw as $n,v as Tn,aa as Fn,X as In,G as Pn,S as Me,ax as Vt,ay as Nn,az as Ln,aA as jt,aB as Dt,aC as On}from"./index.ecc03bc8.js";import{c as zn,B as gt,m as qn,u as Bn,a as st,C as Vn,b as jn,d as rt,D as Dn,e as Wn,E as Hn,f as Qn,F as Kn,G as Un,H as Jn,I as vt,j as Gn,J as Yn,K as Xn,L as Zn,z as ei,A as pt,t as yt,r as Ge,y as ue,s as ti,v as ni,x as G,w as se,M as ii,N as ai,O as oi,P as si,R as ri,S as li,T as ci,U as _t,V as ui,W as Le,X as Oe,Q as Wt,q as Ht,p as di}from"./useCommands.1574ddbb.js";import{_ as Qt}from"./plugin-vue_export-helper.21dcd24c.js";function Kt(){return{save:async(e,t,n,i)=>await globalThis.rmcore.process({storage:{file:{name:t,data:e,bucket:n,user_id:i}}}),fromFullPath:e=>{const t="https://kftvyjuvltnfazpoujyb.supabase.co/storage/v1/object/public/";return e.includes(t)?e:t+e}}}var fi=ae({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:t}){const{proxy:{$q:n}}=Z(),i=Ke(hn,le);if(i===le)return console.error("QPage needs to be a deep child of QLayout"),le;if(Ke(mn,le)===le)return console.error("QPage needs to be child of QPageContainer"),le;const o=M(()=>{const r=(i.header.space===!0?i.header.size:0)+(i.footer.space===!0?i.footer.size:0);if(typeof e.styleFn=="function"){const l=i.isContainer.value===!0?i.containerHeight.value:n.screen.height;return e.styleFn(r,l)}return{minHeight:i.isContainer.value===!0?i.containerHeight.value-r+"px":n.screen.height===0?r!==0?`calc(100vh - ${r}px)`:"100vh":n.screen.height-r+"px"}}),s=M(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>P("main",{class:s.value,style:o.value},Ie(t.default))}});const hi={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function mi({showing:e,avoidEmit:t,configureAnchorEl:n}){const{props:i,proxy:a,emit:o}=Z(),s=$(null);let r=null;function l(d){return s.value===null?!1:d===void 0||d.touches===void 0||d.touches.length<=1}const c={};n===void 0&&(Object.assign(c,{hide(d){a.hide(d)},toggle(d){a.toggle(d),d.qAnchorHandled=!0},toggleKey(d){gn(d,13)===!0&&c.toggle(d)},contextClick(d){a.hide(d),Ue(d),at(()=>{a.show(d),d.qAnchorHandled=!0})},prevent:Ue,mobileTouch(d){if(c.mobileCleanup(d),l(d)!==!0)return;a.hide(d),s.value.classList.add("non-selectable");const h=d.target;mt(c,"anchor",[[h,"touchmove","mobileCleanup","passive"],[h,"touchend","mobileCleanup","passive"],[h,"touchcancel","mobileCleanup","passive"],[s.value,"contextmenu","prevent","notPassive"]]),r=setTimeout(()=>{r=null,a.show(d),d.qAnchorHandled=!0},300)},mobileCleanup(d){s.value.classList.remove("non-selectable"),r!==null&&(clearTimeout(r),r=null),e.value===!0&&d!==void 0&&zn()}}),n=function(d=i.contextMenu){if(i.noParentEvent===!0||s.value===null)return;let h;d===!0?a.$q.platform.is.mobile===!0?h=[[s.value,"touchstart","mobileTouch","passive"]]:h=[[s.value,"mousedown","hide","passive"],[s.value,"contextmenu","contextClick","notPassive"]]:h=[[s.value,"click","toggle","passive"],[s.value,"keyup","toggleKey","passive"]],mt(c,"anchor",h)});function u(){vn(c,"anchor")}function f(d){for(s.value=d;s.value.classList.contains("q-anchor--skip");)s.value=s.value.parentNode;n()}function m(){if(i.target===!1||i.target===""||a.$el.parentNode===null)s.value=null;else if(i.target===!0)f(a.$el.parentNode);else{let d=i.target;if(typeof i.target=="string")try{d=document.querySelector(i.target)}catch{d=void 0}d!=null?(s.value=d.$el||d,n()):(s.value=null,console.error(`Anchor: target "${i.target}" not found`))}}return H(()=>i.contextMenu,d=>{s.value!==null&&(u(),n(d))}),H(()=>i.target,()=>{s.value!==null&&u(),m()}),H(()=>i.noParentEvent,d=>{s.value!==null&&(d===!0?u():n())}),oe(()=>{m(),t!==!0&&i.modelValue===!0&&s.value===null&&o("update:modelValue",!1)}),Pe(()=>{r!==null&&clearTimeout(r),u()}),{anchorEl:s,canShow:l,anchorEvents:c}}function gi(e,t){const n=$(null);let i;function a(r,l){const c=`${l!==void 0?"add":"remove"}EventListener`,u=l!==void 0?l:i;r!==window&&r[c]("scroll",u,Je.passive),window[c]("scroll",u,Je.passive),i=l}function o(){n.value!==null&&(a(n.value),n.value=null)}const s=H(()=>e.noParentEvent,()=>{n.value!==null&&(o(),t())});return Pe(s),{localScrollTarget:n,unconfigureScrollTarget:o,changeScrollEvent:a}}const{notPassiveCapture:ke}=Je,ie=[];function Ae(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let n=gt.length-1;for(;n>=0;){const i=gt[n].$;if(i.type.name==="QTooltip"){n--;continue}if(i.type.name!=="QDialog")break;if(i.props.seamless!==!0)return;n--}for(let i=ie.length-1;i>=0;i--){const a=ie[i];if((a.anchorEl.value===null||a.anchorEl.value.contains(t)===!1)&&(t===document.body||a.innerRef.value!==null&&a.innerRef.value.contains(t)===!1))e.qClickOutside=!0,a.onClickOutside(e);else return}}function vi(e){ie.push(e),ie.length===1&&(document.addEventListener("mousedown",Ae,ke),document.addEventListener("touchstart",Ae,ke))}function bt(e){const t=ie.findIndex(n=>n===e);t>-1&&(ie.splice(t,1),ie.length===0&&(document.removeEventListener("mousedown",Ae,ke),document.removeEventListener("touchstart",Ae,ke)))}let wt,xt;function St(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function pi(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const Ye={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{Ye[`${e}#ltr`]=e,Ye[`${e}#rtl`]=e});function Ct(e,t){const n=e.split(" ");return{vertical:n[0],horizontal:Ye[`${n[1]}#${t===!0?"rtl":"ltr"}`]}}function yi(e,t){let{top:n,left:i,right:a,bottom:o,width:s,height:r}=e.getBoundingClientRect();return t!==void 0&&(n-=t[1],i-=t[0],o+=t[1],a+=t[0],s+=t[0],r+=t[1]),{top:n,bottom:o,height:r,left:i,right:a,width:s,middle:i+(a-i)/2,center:n+(o-n)/2}}function _i(e,t,n){let{top:i,left:a}=e.getBoundingClientRect();return i+=t.top,a+=t.left,n!==void 0&&(i+=n[1],a+=n[0]),{top:i,bottom:i+1,height:1,left:a,right:a+1,width:1,middle:a,center:i}}function bi(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function Et(e,t,n,i){return{top:e[n.vertical]-t[i.vertical],left:e[n.horizontal]-t[i.horizontal]}}function Ut(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{Ut(e,t+1)},10);return}const{targetEl:n,offset:i,anchorEl:a,anchorOrigin:o,selfOrigin:s,absoluteOffset:r,fit:l,cover:c,maxHeight:u,maxWidth:f}=e;if(Ot.is.ios===!0&&window.visualViewport!==void 0){const S=document.body.style,{offsetLeft:C,offsetTop:b}=window.visualViewport;C!==wt&&(S.setProperty("--q-pe-left",C+"px"),wt=C),b!==xt&&(S.setProperty("--q-pe-top",b+"px"),xt=b)}const{scrollLeft:m,scrollTop:d}=n,h=r===void 0?yi(a,c===!0?[0,0]:i):_i(a,r,i);Object.assign(n.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:f||"100vw",maxHeight:u||"100vh",visibility:"visible"});const{offsetWidth:v,offsetHeight:_}=n,{elWidth:T,elHeight:y}=l===!0||c===!0?{elWidth:Math.max(h.width,v),elHeight:c===!0?Math.max(h.height,_):_}:{elWidth:v,elHeight:_};let k={maxWidth:f,maxHeight:u};(l===!0||c===!0)&&(k.minWidth=h.width+"px",c===!0&&(k.minHeight=h.height+"px")),Object.assign(n.style,k);const N=bi(T,y);let F=Et(h,N,o,s);if(r===void 0||i===void 0)De(F,h,N,o,s);else{const{top:S,left:C}=F;De(F,h,N,o,s);let b=!1;if(F.top!==S){b=!0;const g=2*i[1];h.center=h.top-=g,h.bottom-=g+2}if(F.left!==C){b=!0;const g=2*i[0];h.middle=h.left-=g,h.right-=g+2}b===!0&&(F=Et(h,N,o,s),De(F,h,N,o,s))}k={top:F.top+"px",left:F.left+"px"},F.maxHeight!==void 0&&(k.maxHeight=F.maxHeight+"px",h.height>F.maxHeight&&(k.minHeight=k.maxHeight)),F.maxWidth!==void 0&&(k.maxWidth=F.maxWidth+"px",h.width>F.maxWidth&&(k.minWidth=k.maxWidth)),Object.assign(n.style,k),n.scrollTop!==d&&(n.scrollTop=d),n.scrollLeft!==m&&(n.scrollLeft=m)}function De(e,t,n,i,a){const o=n.bottom,s=n.right,r=qn(),l=window.innerHeight-r,c=document.body.clientWidth;if(e.top<0||e.top+o>l)if(a.vertical==="center")e.top=t[i.vertical]>l/2?Math.max(0,l-o):0,e.maxHeight=Math.min(o,l);else if(t[i.vertical]>l/2){const u=Math.min(l,i.vertical==="center"?t.center:i.vertical===a.vertical?t.bottom:t.top);e.maxHeight=Math.min(o,u),e.top=Math.max(0,u-o)}else e.top=Math.max(0,i.vertical==="center"?t.center:i.vertical===a.vertical?t.top:t.bottom),e.maxHeight=Math.min(o,l-e.top);if(e.left<0||e.left+s>c)if(e.maxWidth=Math.min(s,c),a.horizontal==="middle")e.left=t[i.horizontal]>c/2?Math.max(0,c-s):0;else if(t[i.horizontal]>c/2){const u=Math.min(c,i.horizontal==="middle"?t.middle:i.horizontal===a.horizontal?t.right:t.left);e.maxWidth=Math.min(s,u),e.left=Math.max(0,u-e.maxWidth)}else e.left=Math.max(0,i.horizontal==="middle"?t.middle:i.horizontal===a.horizontal?t.left:t.right),e.maxWidth=Math.min(s,c-e.left)}var wi=ae({name:"QMenu",inheritAttrs:!1,props:{...hi,...Bn,...st,...Vn,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:St},self:{type:String,validator:St},offset:{type:Array,validator:pi},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...jn,"click","escapeKey"],setup(e,{slots:t,emit:n,attrs:i}){let a=null,o,s,r;const l=Z(),{proxy:c}=l,{$q:u}=c,f=$(null),m=$(!1),d=M(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),h=rt(e,u),{registerTick:v,removeTick:_}=Dn(),{registerTimeout:T}=Wn(),{transitionProps:y,transitionStyle:k}=Hn(e),{localScrollTarget:N,changeScrollEvent:F,unconfigureScrollTarget:S}=gi(e,ft),{anchorEl:C,canShow:b}=mi({showing:m}),{hide:g}=Qn({showing:m,canShow:b,handleShow:he,handleHide:Be,hideOnRouteChange:d,processOnMount:!0}),{showPortal:E,hidePortal:q,renderPortal:U}=Kn(l,f,un,"menu"),te={anchorEl:C,innerRef:f,onClickOutside(A){if(e.persistent!==!0&&m.value===!0)return g(A),(A.type==="touchstart"||A.target.classList.contains("q-dialog__backdrop"))&&Ne(A),!0}},z=M(()=>Ct(e.anchor||(e.cover===!0?"center middle":"bottom start"),u.lang.rtl)),X=M(()=>e.cover===!0?z.value:Ct(e.self||"top start",u.lang.rtl)),re=M(()=>(e.square===!0?" q-menu--square":"")+(h.value===!0?" q-menu--dark q-dark":"")),R=M(()=>e.autoClose===!0?{onClick:cn}:{}),B=M(()=>m.value===!0&&e.persistent!==!0);H(B,A=>{A===!0?(Zn(Ve),vi(te)):(vt(Ve),bt(te))});function j(){Yn(()=>{let A=f.value;A&&A.contains(document.activeElement)!==!0&&(A=A.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||A.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||A.querySelector("[autofocus], [data-autofocus]")||A,A.focus({preventScroll:!0}))})}function he(A){if(a=e.noRefocus===!1?document.activeElement:null,Un(ht),E(),ft(),o=void 0,A!==void 0&&(e.touchPosition||e.contextMenu)){const je=pn(A);if(je.left!==void 0){const{top:dn,left:fn}=C.value.getBoundingClientRect();o={left:je.left-fn,top:je.top-dn}}}s===void 0&&(s=H(()=>u.screen.width+"|"+u.screen.height+"|"+e.self+"|"+e.anchor+"|"+u.lang.rtl,me)),e.noFocus!==!0&&document.activeElement.blur(),v(()=>{me(),e.noFocus!==!0&&j()}),T(()=>{u.platform.is.ios===!0&&(r=e.autoClose,f.value.click()),me(),E(!0),n("show",A)},e.transitionDuration)}function Be(A){_(),q(),dt(!0),a!==null&&(A===void 0||A.qClickOutside!==!0)&&(((A&&A.type.indexOf("key")===0?a.closest('[tabindex]:not([tabindex^="-"])'):void 0)||a).focus(),a=null),T(()=>{q(!0),n("hide",A)},e.transitionDuration)}function dt(A){o=void 0,s!==void 0&&(s(),s=void 0),(A===!0||m.value===!0)&&(Jn(ht),S(),bt(te),vt(Ve)),A!==!0&&(a=null)}function ft(){(C.value!==null||e.scrollTarget!==void 0)&&(N.value=Gn(C.value,e.scrollTarget),F(N.value,me))}function cn(A){r!==!0?(Xn(c,A),n("click",A)):r=!1}function ht(A){B.value===!0&&e.noFocus!==!0&&yn(f.value,A.target)!==!0&&j()}function Ve(A){n("escapeKey"),g(A)}function me(){Ut({targetEl:f.value,offset:e.offset,anchorEl:C.value,anchorOrigin:z.value,selfOrigin:X.value,absoluteOffset:o,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function un(){return P(zt,y.value,()=>m.value===!0?P("div",{role:"menu",...i,ref:f,tabindex:-1,class:["q-menu q-position-engine scroll"+re.value,i.class],style:[i.style,k.value],...R.value},Ie(t.default)):null)}return Pe(dt),Object.assign(c,{focus:j,updatePosition:me}),U}});const xi=K({__name:"QPaletteItem",props:{name:{},icon:{},description:{},command:{type:Function},countCommand:{type:Function},active:{type:Boolean}},setup(e){const t=e;return(n,i)=>_n((I(),V(ei,{clickable:"",onClick:t.countCommand,active:t.active},{default:x(()=>[p(pt,{avatar:""},{default:x(()=>[p(Ee,{name:t.icon},null,8,["name"])]),_:1}),p(pt,null,{default:x(()=>[p(yt,null,{default:x(()=>[ve(pe(t.name),1)]),_:1}),p(yt,{caption:""},{default:x(()=>[ve(pe(t.description),1)]),_:1})]),_:1})]),_:1},8,["onClick","active"])),[[qt]])}});function Si(e){return xn()?(Sn(e),!0):!1}function de(e){return typeof e=="function"?e():L(e)}const ze=typeof window!="undefined"&&typeof document!="undefined";typeof WorkerGlobalScope!="undefined"&&globalThis instanceof WorkerGlobalScope;const Ci=Object.prototype.toString,Ei=e=>Ci.call(e)==="[object Object]",Jt=()=>{};function Mi(e,t){function n(...i){return new Promise((a,o)=>{Promise.resolve(e(()=>t.apply(this,i),{fn:t,thisArg:this,args:i})).then(a).catch(o)})}return n}const Gt=e=>e();function ki(e=Gt){const t=$(!0);function n(){t.value=!1}function i(){t.value=!0}const a=(...o)=>{t.value&&e(...o)};return{isActive:Bt(t),pause:n,resume:i,eventFilter:a}}function Ai(e){return e||Z()}function Ri(...e){if(e.length!==1)return bn(...e);const t=e[0];return typeof t=="function"?Bt(wn(()=>({get:t,set:Jt}))):$(t)}function $i(e,t,n={}){const{eventFilter:i=Gt,...a}=n;return H(e,Mi(i,t),a)}function Ti(e,t,n={}){const{eventFilter:i,...a}=n,{eventFilter:o,pause:s,resume:r,isActive:l}=ki(i);return{stop:$i(e,t,{...a,eventFilter:o}),pause:s,resume:r,isActive:l}}function Fi(e,t=!0,n){Ai()?oe(e,n):t?e():at(e)}function Ii(e){var t;const n=de(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Re=ze?window:void 0,Pi=ze?window.document:void 0;ze&&window.navigator;ze&&window.location;function $e(...e){let t,n,i,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,i,a]=e,t=Re):[t,n,i,a]=e,!t)return Jt;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const o=[],s=()=>{o.forEach(u=>u()),o.length=0},r=(u,f,m,d)=>(u.addEventListener(f,m,d),()=>u.removeEventListener(f,m,d)),l=H(()=>[Ii(t),de(a)],([u,f])=>{if(s(),!u)return;const m=Ei(f)?{...f}:f;o.push(...n.flatMap(d=>i.map(h=>r(u,d,h,m))))},{immediate:!0,flush:"post"}),c=()=>{l(),s()};return Si(c),c}function Ni(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function We(...e){let t,n,i={};e.length===3?(t=e[0],n=e[1],i=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],i=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:a=Re,eventName:o="keydown",passive:s=!1,dedupe:r=!1}=i,l=Ni(t);return $e(a,o,u=>{u.repeat&&de(r)||l(u)&&n(u)},s)}function Li(){const{activeElement:e,body:t}=document;if(!e||e===t)return!1;switch(e.tagName){case"INPUT":case"TEXTAREA":return!0}return e.hasAttribute("contenteditable")}function Oi({keyCode:e,metaKey:t,ctrlKey:n,altKey:i}){return t||n||i?!1:e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122}function zi(e,t={}){const{document:n=Pi}=t;n&&$e(n,"keydown",a=>{!Li()&&Oi(a)&&e(a)},{passive:!0})}const we=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},xe="__vueuse_ssr_handlers__",qi=Bi();function Bi(){return xe in we||(we[xe]=we[xe]||{}),we[xe]}function Vi(e,t){return qi[e]||t}function ji(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const Di={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},Mt="vueuse-storage";function Wi(e,t,n,i={}){var a;const{flush:o="pre",deep:s=!0,listenToStorageChanges:r=!0,writeDefaults:l=!0,mergeDefaults:c=!1,shallow:u,window:f=Re,eventFilter:m,onError:d=g=>{console.error(g)},initOnMounted:h}=i,v=(u?ot:$)(typeof t=="function"?t():t);if(!n)try{n=Vi("getDefaultStorage",()=>{var g;return(g=Re)==null?void 0:g.localStorage})()}catch(g){d(g)}if(!n)return v;const _=de(t),T=ji(_),y=(a=i.serializer)!=null?a:Di[T],{pause:k,resume:N}=Ti(v,()=>F(v.value),{flush:o,deep:s,eventFilter:m});return f&&r&&Fi(()=>{$e(f,"storage",b),$e(f,Mt,C),h&&b()}),h||b(),v;function F(g){try{if(g==null)n.removeItem(e);else{const E=y.write(g),q=n.getItem(e);q!==E&&(n.setItem(e,E),f&&f.dispatchEvent(new CustomEvent(Mt,{detail:{key:e,oldValue:q,newValue:E,storageArea:n}})))}}catch(E){d(E)}}function S(g){const E=g?g.newValue:n.getItem(e);if(E==null)return l&&_!=null&&n.setItem(e,y.write(_)),_;if(!g&&c){const q=y.read(E);return typeof c=="function"?c(q,_):T==="object"&&!Array.isArray(q)?{..._,...q}:q}else return typeof E!="string"?E:y.read(E)}function C(g){b(g.detail)}function b(g){if(!(g&&g.storageArea!==n)){if(g&&g.key==null){v.value=_;return}if(!(g&&g.key!==e)){k();try{(g==null?void 0:g.newValue)!==y.write(v.value)&&(v.value=S(g))}catch(E){d(E)}finally{g?at(N):N()}}}}}function Hi(e,t){const n=ot(c()),i=Ri(e),a=M({get(){var u;const f=i.value;let m=t!=null&&t.getIndexOf?t.getIndexOf(n.value,f):f.indexOf(n.value);return m<0&&(m=(u=t==null?void 0:t.fallbackIndex)!=null?u:0),m},set(u){o(u)}});function o(u){const f=i.value,m=f.length,d=(u%m+m)%m,h=f[d];return n.value=h,h}function s(u=1){return o(a.value+u)}function r(u=1){return s(u)}function l(u=1){return s(-u)}function c(){var u,f;return(f=de((u=t==null?void 0:t.initialValue)!=null?u:de(e)[0]))!=null?f:void 0}return H(i,()=>o(a.value)),{state:n,index:a,next:r,prev:l}}function Y(e){return Array.isArray?Array.isArray(e):Zt(e)==="[object Array]"}const Qi=1/0;function Ki(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-Qi?"-0":t}function Ui(e){return e==null?"":Ki(e)}function J(e){return typeof e=="string"}function Yt(e){return typeof e=="number"}function Ji(e){return e===!0||e===!1||Gi(e)&&Zt(e)=="[object Boolean]"}function Xt(e){return typeof e=="object"}function Gi(e){return Xt(e)&&e!==null}function D(e){return e!=null}function He(e){return!e.trim().length}function Zt(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Yi="Incorrect 'index' type",Xi=e=>`Invalid value for key ${e}`,Zi=e=>`Pattern length exceeds max of ${e}.`,ea=e=>`Missing ${e} property in key`,ta=e=>`Property 'weight' in key '${e}' must be a positive integer`,kt=Object.prototype.hasOwnProperty;class na{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(i=>{let a=en(i);n+=a.weight,this._keys.push(a),this._keyMap[a.id]=a,n+=a.weight}),this._keys.forEach(i=>{i.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function en(e){let t=null,n=null,i=null,a=1,o=null;if(J(e)||Y(e))i=e,t=At(e),n=Xe(e);else{if(!kt.call(e,"name"))throw new Error(ea("name"));const s=e.name;if(i=s,kt.call(e,"weight")&&(a=e.weight,a<=0))throw new Error(ta(s));t=At(s),n=Xe(s),o=e.getFn}return{path:t,id:n,weight:a,src:i,getFn:o}}function At(e){return Y(e)?e:e.split(".")}function Xe(e){return Y(e)?e.join("."):e}function ia(e,t){let n=[],i=!1;const a=(o,s,r)=>{if(!!D(o))if(!s[r])n.push(o);else{let l=s[r];const c=o[l];if(!D(c))return;if(r===s.length-1&&(J(c)||Yt(c)||Ji(c)))n.push(Ui(c));else if(Y(c)){i=!0;for(let u=0,f=c.length;u<f;u+=1)a(c[u],s,r+1)}else s.length&&a(c,s,r+1)}};return a(e,J(t)?t.split("."):t,0),i?n:n[0]}const aa={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},oa={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},sa={location:0,threshold:.6,distance:100},ra={useExtendedSearch:!1,getFn:ia,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var w={...oa,...aa,...sa,...ra};const la=/[^ ]+/g;function ca(e=1,t=3){const n=new Map,i=Math.pow(10,t);return{get(a){const o=a.match(la).length;if(n.has(o))return n.get(o);const s=1/Math.pow(o,.5*e),r=parseFloat(Math.round(s*i)/i);return n.set(o,r),r},clear(){n.clear()}}}class lt{constructor({getFn:t=w.getFn,fieldNormWeight:n=w.fieldNormWeight}={}){this.norm=ca(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,i)=>{this._keysMap[n.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,J(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();J(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,i=this.size();n<i;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!D(t)||He(t))return;let i={v:t,i:n,n:this.norm.get(t)};this.records.push(i)}_addObject(t,n){let i={i:n,$:{}};this.keys.forEach((a,o)=>{let s=a.getFn?a.getFn(t):this.getFn(t,a.path);if(!!D(s)){if(Y(s)){let r=[];const l=[{nestedArrIndex:-1,value:s}];for(;l.length;){const{nestedArrIndex:c,value:u}=l.pop();if(!!D(u))if(J(u)&&!He(u)){let f={v:u,i:c,n:this.norm.get(u)};r.push(f)}else Y(u)&&u.forEach((f,m)=>{l.push({nestedArrIndex:m,value:f})})}i.$[o]=r}else if(J(s)&&!He(s)){let r={v:s,n:this.norm.get(s)};i.$[o]=r}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function tn(e,t,{getFn:n=w.getFn,fieldNormWeight:i=w.fieldNormWeight}={}){const a=new lt({getFn:n,fieldNormWeight:i});return a.setKeys(e.map(en)),a.setSources(t),a.create(),a}function ua(e,{getFn:t=w.getFn,fieldNormWeight:n=w.fieldNormWeight}={}){const{keys:i,records:a}=e,o=new lt({getFn:t,fieldNormWeight:n});return o.setKeys(i),o.setIndexRecords(a),o}function Se(e,{errors:t=0,currentLocation:n=0,expectedLocation:i=0,distance:a=w.distance,ignoreLocation:o=w.ignoreLocation}={}){const s=t/e.length;if(o)return s;const r=Math.abs(i-n);return a?s+r/a:r?1:s}function da(e=[],t=w.minMatchCharLength){let n=[],i=-1,a=-1,o=0;for(let s=e.length;o<s;o+=1){let r=e[o];r&&i===-1?i=o:!r&&i!==-1&&(a=o-1,a-i+1>=t&&n.push([i,a]),i=-1)}return e[o-1]&&o-i>=t&&n.push([i,o-1]),n}const ne=32;function fa(e,t,n,{location:i=w.location,distance:a=w.distance,threshold:o=w.threshold,findAllMatches:s=w.findAllMatches,minMatchCharLength:r=w.minMatchCharLength,includeMatches:l=w.includeMatches,ignoreLocation:c=w.ignoreLocation}={}){if(t.length>ne)throw new Error(Zi(ne));const u=t.length,f=e.length,m=Math.max(0,Math.min(i,f));let d=o,h=m;const v=r>1||l,_=v?Array(f):[];let T;for(;(T=e.indexOf(t,h))>-1;){let C=Se(t,{currentLocation:T,expectedLocation:m,distance:a,ignoreLocation:c});if(d=Math.min(C,d),h=T+u,v){let b=0;for(;b<u;)_[T+b]=1,b+=1}}h=-1;let y=[],k=1,N=u+f;const F=1<<u-1;for(let C=0;C<u;C+=1){let b=0,g=N;for(;b<g;)Se(t,{errors:C,currentLocation:m+g,expectedLocation:m,distance:a,ignoreLocation:c})<=d?b=g:N=g,g=Math.floor((N-b)/2+b);N=g;let E=Math.max(1,m-g+1),q=s?f:Math.min(m+g,f)+u,U=Array(q+2);U[q+1]=(1<<C)-1;for(let z=q;z>=E;z-=1){let X=z-1,re=n[e.charAt(X)];if(v&&(_[X]=+!!re),U[z]=(U[z+1]<<1|1)&re,C&&(U[z]|=(y[z+1]|y[z])<<1|1|y[z+1]),U[z]&F&&(k=Se(t,{errors:C,currentLocation:X,expectedLocation:m,distance:a,ignoreLocation:c}),k<=d)){if(d=k,h=X,h<=m)break;E=Math.max(1,2*m-h)}}if(Se(t,{errors:C+1,currentLocation:m,expectedLocation:m,distance:a,ignoreLocation:c})>d)break;y=U}const S={isMatch:h>=0,score:Math.max(.001,k)};if(v){const C=da(_,r);C.length?l&&(S.indices=C):S.isMatch=!1}return S}function ha(e){let t={};for(let n=0,i=e.length;n<i;n+=1){const a=e.charAt(n);t[a]=(t[a]||0)|1<<i-n-1}return t}class nn{constructor(t,{location:n=w.location,threshold:i=w.threshold,distance:a=w.distance,includeMatches:o=w.includeMatches,findAllMatches:s=w.findAllMatches,minMatchCharLength:r=w.minMatchCharLength,isCaseSensitive:l=w.isCaseSensitive,ignoreLocation:c=w.ignoreLocation}={}){if(this.options={location:n,threshold:i,distance:a,includeMatches:o,findAllMatches:s,minMatchCharLength:r,isCaseSensitive:l,ignoreLocation:c},this.pattern=l?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const u=(m,d)=>{this.chunks.push({pattern:m,alphabet:ha(m),startIndex:d})},f=this.pattern.length;if(f>ne){let m=0;const d=f%ne,h=f-d;for(;m<h;)u(this.pattern.substr(m,ne),m),m+=ne;if(d){const v=f-ne;u(this.pattern.substr(v),v)}}else u(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:i}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let h={isMatch:!0,score:0};return i&&(h.indices=[[0,t.length-1]]),h}const{location:a,distance:o,threshold:s,findAllMatches:r,minMatchCharLength:l,ignoreLocation:c}=this.options;let u=[],f=0,m=!1;this.chunks.forEach(({pattern:h,alphabet:v,startIndex:_})=>{const{isMatch:T,score:y,indices:k}=fa(t,h,v,{location:a+_,distance:o,threshold:s,findAllMatches:r,minMatchCharLength:l,includeMatches:i,ignoreLocation:c});T&&(m=!0),f+=y,T&&k&&(u=[...u,...k])});let d={isMatch:m,score:m?f/this.chunks.length:1};return m&&i&&(d.indices=u),d}}class ee{constructor(t){this.pattern=t}static isMultiMatch(t){return Rt(t,this.multiRegex)}static isSingleMatch(t){return Rt(t,this.singleRegex)}search(){}}function Rt(e,t){const n=e.match(t);return n?n[1]:null}class ma extends ee{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class ga extends ee{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const i=t.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,t.length-1]}}}class va extends ee{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class pa extends ee{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class ya extends ee{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class _a extends ee{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class an extends ee{constructor(t,{location:n=w.location,threshold:i=w.threshold,distance:a=w.distance,includeMatches:o=w.includeMatches,findAllMatches:s=w.findAllMatches,minMatchCharLength:r=w.minMatchCharLength,isCaseSensitive:l=w.isCaseSensitive,ignoreLocation:c=w.ignoreLocation}={}){super(t),this._bitapSearch=new nn(t,{location:n,threshold:i,distance:a,includeMatches:o,findAllMatches:s,minMatchCharLength:r,isCaseSensitive:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class on extends ee{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,i;const a=[],o=this.pattern.length;for(;(i=t.indexOf(this.pattern,n))>-1;)n=i+o,a.push([i,n-1]);const s=!!a.length;return{isMatch:s,score:s?0:1,indices:a}}}const Ze=[ma,on,va,pa,_a,ya,ga,an],$t=Ze.length,ba=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,wa="|";function xa(e,t={}){return e.split(wa).map(n=>{let i=n.trim().split(ba).filter(o=>o&&!!o.trim()),a=[];for(let o=0,s=i.length;o<s;o+=1){const r=i[o];let l=!1,c=-1;for(;!l&&++c<$t;){const u=Ze[c];let f=u.isMultiMatch(r);f&&(a.push(new u(f,t)),l=!0)}if(!l)for(c=-1;++c<$t;){const u=Ze[c];let f=u.isSingleMatch(r);if(f){a.push(new u(f,t));break}}}return a})}const Sa=new Set([an.type,on.type]);class Ca{constructor(t,{isCaseSensitive:n=w.isCaseSensitive,includeMatches:i=w.includeMatches,minMatchCharLength:a=w.minMatchCharLength,ignoreLocation:o=w.ignoreLocation,findAllMatches:s=w.findAllMatches,location:r=w.location,threshold:l=w.threshold,distance:c=w.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:i,minMatchCharLength:a,findAllMatches:s,ignoreLocation:o,location:r,threshold:l,distance:c},this.pattern=n?t:t.toLowerCase(),this.query=xa(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:a}=this.options;t=a?t:t.toLowerCase();let o=0,s=[],r=0;for(let l=0,c=n.length;l<c;l+=1){const u=n[l];s.length=0,o=0;for(let f=0,m=u.length;f<m;f+=1){const d=u[f],{isMatch:h,indices:v,score:_}=d.search(t);if(h){if(o+=1,r+=_,i){const T=d.constructor.type;Sa.has(T)?s=[...s,...v]:s.push(v)}}else{r=0,o=0,s.length=0;break}}if(o){let f={isMatch:!0,score:r/o};return i&&(f.indices=s),f}}return{isMatch:!1,score:1}}}const et=[];function Ea(...e){et.push(...e)}function tt(e,t){for(let n=0,i=et.length;n<i;n+=1){let a=et[n];if(a.condition(e,t))return new a(e,t)}return new nn(e,t)}const Te={AND:"$and",OR:"$or"},nt={PATH:"$path",PATTERN:"$val"},it=e=>!!(e[Te.AND]||e[Te.OR]),Ma=e=>!!e[nt.PATH],ka=e=>!Y(e)&&Xt(e)&&!it(e),Tt=e=>({[Te.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function sn(e,t,{auto:n=!0}={}){const i=a=>{let o=Object.keys(a);const s=Ma(a);if(!s&&o.length>1&&!it(a))return i(Tt(a));if(ka(a)){const l=s?a[nt.PATH]:o[0],c=s?a[nt.PATTERN]:a[l];if(!J(c))throw new Error(Xi(l));const u={keyId:Xe(l),pattern:c};return n&&(u.searcher=tt(c,t)),u}let r={children:[],operator:o[0]};return o.forEach(l=>{const c=a[l];Y(c)&&c.forEach(u=>{r.children.push(i(u))})}),r};return it(e)||(e=Tt(e)),i(e)}function Aa(e,{ignoreFieldNorm:t=w.ignoreFieldNorm}){e.forEach(n=>{let i=1;n.matches.forEach(({key:a,norm:o,score:s})=>{const r=a?a.weight:null;i*=Math.pow(s===0&&r?Number.EPSILON:s,(r||1)*(t?1:o))}),n.score=i})}function Ra(e,t){const n=e.matches;t.matches=[],D(n)&&n.forEach(i=>{if(!D(i.indices)||!i.indices.length)return;const{indices:a,value:o}=i;let s={indices:a,value:o};i.key&&(s.key=i.key.src),i.idx>-1&&(s.refIndex=i.idx),t.matches.push(s)})}function $a(e,t){t.score=e.score}function Ta(e,t,{includeMatches:n=w.includeMatches,includeScore:i=w.includeScore}={}){const a=[];return n&&a.push(Ra),i&&a.push($a),e.map(o=>{const{idx:s}=o,r={item:t[s],refIndex:s};return a.length&&a.forEach(l=>{l(o,r)}),r})}class fe{constructor(t,n={},i){this.options={...w,...n},this.options.useExtendedSearch,this._keyStore=new na(this.options.keys),this.setCollection(t,i)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof lt))throw new Error(Yi);this._myIndex=n||tn(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){!D(t)||(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let i=0,a=this._docs.length;i<a;i+=1){const o=this._docs[i];t(o,i)&&(this.removeAt(i),i-=1,a-=1,n.push(o))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:i,includeScore:a,shouldSort:o,sortFn:s,ignoreFieldNorm:r}=this.options;let l=J(t)?J(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Aa(l,{ignoreFieldNorm:r}),o&&l.sort(s),Yt(n)&&n>-1&&(l=l.slice(0,n)),Ta(l,this._docs,{includeMatches:i,includeScore:a})}_searchStringList(t){const n=tt(t,this.options),{records:i}=this._myIndex,a=[];return i.forEach(({v:o,i:s,n:r})=>{if(!D(o))return;const{isMatch:l,score:c,indices:u}=n.searchIn(o);l&&a.push({item:o,idx:s,matches:[{score:c,value:o,norm:r,indices:u}]})}),a}_searchLogical(t){const n=sn(t,this.options),i=(r,l,c)=>{if(!r.children){const{keyId:f,searcher:m}=r,d=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(l,f),searcher:m});return d&&d.length?[{idx:c,item:l,matches:d}]:[]}const u=[];for(let f=0,m=r.children.length;f<m;f+=1){const d=r.children[f],h=i(d,l,c);if(h.length)u.push(...h);else if(r.operator===Te.AND)return[]}return u},a=this._myIndex.records,o={},s=[];return a.forEach(({$:r,i:l})=>{if(D(r)){let c=i(n,r,l);c.length&&(o[l]||(o[l]={idx:l,item:r,matches:[]},s.push(o[l])),c.forEach(({matches:u})=>{o[l].matches.push(...u)}))}}),s}_searchObjectList(t){const n=tt(t,this.options),{keys:i,records:a}=this._myIndex,o=[];return a.forEach(({$:s,i:r})=>{if(!D(s))return;let l=[];i.forEach((c,u)=>{l.push(...this._findMatches({key:c,value:s[u],searcher:n}))}),l.length&&o.push({idx:r,item:s,matches:l})}),o}_findMatches({key:t,value:n,searcher:i}){if(!D(n))return[];let a=[];if(Y(n))n.forEach(({v:o,i:s,n:r})=>{if(!D(o))return;const{isMatch:l,score:c,indices:u}=i.searchIn(o);l&&a.push({score:c,key:t,value:o,idx:s,norm:r,indices:u})});else{const{v:o,n:s}=n,{isMatch:r,score:l,indices:c}=i.searchIn(o);r&&a.push({score:l,key:t,value:o,norm:s,indices:c})}return a}}fe.version="6.6.2";fe.createIndex=tn;fe.parseIndex=ua;fe.config=w;fe.parseQuery=sn;Ea(Ca);function be(){return Ke(Cn)}const Fa={class:"row overflow-auto"},Ia={class:"row flex-center"},Pa=K({__name:"QCommandPalette",props:{commands:{}},setup(e){const t=be(),n=e,i=Wi("COMMAND_COUNTER",{}),a=$(""),o=$(),s=$(!1),r=[],l=Hi(r),c=$(),u=[];H(()=>n.commands,(d,h)=>{d!==h&&(c.value=n.commands.map(v=>(v.countCommand=()=>{var _;return i.value={...i.value,[v.name]:{count:(_=i.value[v.name])!=null&&_.count?i.value[v.name].count+1:1,lastChanged:Date.now()}},v.command()},v)).toSorted((v,_)=>{var T,y;return(((T=i.value[_.name])==null?void 0:T.count)||0)-(((y=i.value[v.name])==null?void 0:y.count)||0)}),u.push(n.commands))},{deep:!0,immediate:!0}),zi(d=>{var h;console.log(d),(h=o.value)==null||h.focus()}),We(["/"],d=>{var h;d.preventDefault(),(h=o.value)==null||h.focus()}),We("ArrowDown",d=>{d.preventDefault(),r.some(h=>document.activeElement===h.$el)?(l.next(),l.state.value.$el.focus()):s&&r[0].$el.focus()}),We("ArrowUp",d=>{d.preventDefault(),r.some(h=>document.activeElement===h.$el)?(l.prev(),l.state.value.$el.focus()):s&&r[r.length-1].$el.focus()});function f(){a.value!==""&&(s.value=!0)}const m=M(()=>a.value===""?c.value.map(h=>({item:h})):new fe(c.value,{keys:["name"]}).search(a.value));return(d,h)=>(I(),Q("div",null,[O("div",Fa,[p(Ge,null,{default:x(()=>[(I(!0),Q(ye,null,_e(c.value,v=>(I(),V(W,{stack:"",square:"",size:L(t).screen.lt.md?"sm":"md",key:v.name,icon:v.icon,label:v.name,onClick:v.countCommand},null,8,["size","icon","label","onClick"]))),128))]),_:1})]),O("div",Ia,[p(ue,{class:"full-width",ref_key:"textInput",ref:o,modelValue:a.value,"onUpdate:modelValue":[h[0]||(h[0]=v=>a.value=v),f],label:"What ya looking for?"},null,8,["modelValue"]),p(wi,{class:"z-max",modelValue:s.value,"onUpdate:modelValue":h[1]||(h[1]=v=>s.value=v),"no-focus":"",fit:"",onHide:h[2]||(h[2]=()=>{u.length>1&&(c.value=u[0])})},{default:x(()=>[p(ti,null,{default:x(()=>[(I(!0),Q(ye,null,_e(m.value,v=>(I(),V(xi,En(v.item,{ref_for:!0,ref:"listItems"}),null,16))),256))]),_:1})]),_:1},8,["modelValue"])])]))}});var Na=Qt(Pa,[["__scopeId","data-v-11600d0e"]]);const ge=K({__name:"BaseFormDialog",props:{show:{type:Boolean}},setup(e){const t=e,n=$(!1);return H(()=>t.show,i=>{n.value=i}),(i,a)=>(I(),V(ni,{position:"right","full-height":"",modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=o=>n.value=o),onHide:a[1]||(a[1]=()=>i.$emit("hide"))},{default:x(()=>[p(se,{class:"dialog-card"},{default:x(()=>[p(G,{class:"col"},{default:x(()=>[Mn(i.$slots,"default")]),_:3})]),_:3})]),_:3},8,["modelValue"]))}}),La={xs:8,sm:10,md:14,lg:20,xl:24};var Oa=ae({name:"QChip",props:{...st,...kn,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:t,emit:n}){const{proxy:{$q:i}}=Z(),a=rt(e,i),o=An(e,La),s=M(()=>e.selected===!0||e.icon!==void 0),r=M(()=>e.selected===!0?e.iconSelected||i.iconSet.chip.selected:e.icon),l=M(()=>e.iconRemove||i.iconSet.chip.remove),c=M(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),u=M(()=>{const _=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(_?` text-${_} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(c.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(a.value===!0?" q-chip--dark q-dark":"")}),f=M(()=>{const _=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},T={..._,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||i.lang.label.remove};return{chip:_,remove:T}});function m(_){_.keyCode===13&&d(_)}function d(_){e.disable||(n("update:selected",!e.selected),n("click",_))}function h(_){(_.keyCode===void 0||_.keyCode===13)&&(Ne(_),e.disable===!1&&(n("update:modelValue",!1),n("remove")))}function v(){const _=[];c.value===!0&&_.push(P("div",{class:"q-focus-helper"})),s.value===!0&&_.push(P(Ee,{class:"q-chip__icon q-chip__icon--left",name:r.value}));const T=e.label!==void 0?[P("div",{class:"ellipsis"},[e.label])]:void 0;return _.push(P("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},$n(t.default,T))),e.iconRight&&_.push(P(Ee,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&_.push(P(Ee,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:l.value,...f.value.remove,onClick:h,onKeyup:h})),_}return()=>{if(e.modelValue===!1)return;const _={class:u.value,style:o.value};return c.value===!0&&Object.assign(_,f.value.chip,{onClick:d,onKeyup:m}),Rn("div",_,v(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[qt,e.ripple]])}}});function ce(e,t,n,i){const a=[];return e.forEach(o=>{i(o)===!0?a.push(o):t.push({failedPropValidation:n,file:o})}),a}function Ce(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),Ne(e)}const za={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},qa=["rejected"];function Ba({editable:e,dnd:t,getFileInput:n,addFilesToQueue:i}){const{props:a,emit:o,proxy:s}=Z(),r=$(null),l=M(()=>a.accept!==void 0?a.accept.split(",").map(y=>(y=y.trim(),y==="*"?"*/":(y.endsWith("/*")&&(y=y.slice(0,y.length-1)),y.toUpperCase()))):null),c=M(()=>parseInt(a.maxFiles,10)),u=M(()=>parseInt(a.maxTotalSize,10));function f(y){if(e.value)if(y!==Object(y)&&(y={target:null}),y.target!==null&&y.target.matches('input[type="file"]')===!0)y.clientX===0&&y.clientY===0&&Tn(y);else{const k=n();k&&k!==y.target&&k.click(y)}}function m(y){e.value&&y&&i(null,y)}function d(y,k,N,F){let S=Array.from(k||y.target.files);const C=[],b=()=>{C.length!==0&&o("rejected",C)};if(a.accept!==void 0&&l.value.indexOf("*/")===-1&&(S=ce(S,C,"accept",g=>l.value.some(E=>g.type.toUpperCase().startsWith(E)||g.name.toUpperCase().endsWith(E))),S.length===0))return b();if(a.maxFileSize!==void 0){const g=parseInt(a.maxFileSize,10);if(S=ce(S,C,"max-file-size",E=>E.size<=g),S.length===0)return b()}if(a.multiple!==!0&&S.length!==0&&(S=[S[0]]),S.forEach(g=>{g.__key=g.webkitRelativePath+g.lastModified+g.name+g.size}),F===!0){const g=N.map(E=>E.__key);S=ce(S,C,"duplicate",E=>g.includes(E.__key)===!1)}if(S.length===0)return b();if(a.maxTotalSize!==void 0){let g=F===!0?N.reduce((E,q)=>E+q.size,0):0;if(S=ce(S,C,"max-total-size",E=>(g+=E.size,g<=u.value)),S.length===0)return b()}if(typeof a.filter=="function"){const g=a.filter(S);S=ce(S,C,"filter",E=>g.includes(E))}if(a.maxFiles!==void 0){let g=F===!0?N.length:0;if(S=ce(S,C,"max-files",()=>(g++,g<=c.value)),S.length===0)return b()}if(b(),S.length!==0)return S}function h(y){Ce(y),t.value!==!0&&(t.value=!0)}function v(y){Ne(y),(y.relatedTarget!==null||Ot.is.safari!==!0?y.relatedTarget!==r.value:document.elementsFromPoint(y.clientX,y.clientY).includes(r.value)===!1)===!0&&(t.value=!1)}function _(y){Ce(y);const k=y.dataTransfer.files;k.length!==0&&i(null,k),t.value=!1}function T(y){if(t.value===!0)return P("div",{ref:r,class:`q-${y}__dnd absolute-full`,onDragenter:Ce,onDragover:Ce,onDragleave:v,onDrop:_})}return Object.assign(s,{pickFiles:f,addFiles:m}),{pickFiles:f,addFiles:m,onDragover:h,onDragleave:v,processFiles:d,getDndNode:T,maxFilesNumber:c,maxTotalSizeNumber:u}}var rn=ae({name:"QFile",inheritAttrs:!1,props:{...ii,...ai,...za,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...oi,...qa],setup(e,{slots:t,emit:n,attrs:i}){const{proxy:a}=Z(),o=si(),s=$(null),r=$(!1),l=ri(e),{pickFiles:c,onDragover:u,onDragleave:f,processFiles:m,getDndNode:d}=Ba({editable:o.editable,dnd:r,getFileInput:U,addFilesToQueue:te}),h=li(e),v=M(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),_=M(()=>_t(v.value)),T=M(()=>v.value.map(R=>R.name).join(", ")),y=M(()=>ui(v.value.reduce((R,B)=>R+B.size,0))),k=M(()=>({totalSize:y.value,filesNumber:v.value.length,maxFiles:e.maxFiles})),N=M(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:l.value,...i,id:o.targetUid.value,disabled:o.editable.value!==!0})),F=M(()=>"q-file q-field--auto-height"+(r.value===!0?" q-file--dnd":"")),S=M(()=>e.multiple===!0&&e.append===!0);function C(R){const B=v.value.slice();B.splice(R,1),g(B)}function b(R){const B=v.value.indexOf(R);B>-1&&C(B)}function g(R){n("update:modelValue",e.multiple===!0?R:R[0])}function E(R){R.keyCode===13&&Ue(R)}function q(R){(R.keyCode===13||R.keyCode===32)&&c(R)}function U(){return s.value}function te(R,B){const j=m(R,B,v.value,S.value),he=U();he!=null&&(he.value=""),j!==void 0&&((e.multiple===!0?e.modelValue&&j.every(Be=>v.value.includes(Be)):e.modelValue===j[0])||g(S.value===!0?v.value.concat(j):j))}function z(){return[P("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function X(){if(t.file!==void 0)return v.value.length===0?z():v.value.map((B,j)=>t.file({index:j,file:B,ref:this}));if(t.selected!==void 0)return v.value.length===0?z():t.selected({files:v.value,ref:this});if(e.useChips===!0)return v.value.length===0?z():v.value.map((B,j)=>P(Oa,{key:"file-"+j,removable:o.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{C(j)}},()=>P("span",{class:"ellipsis",textContent:B.name})));const R=e.displayValue!==void 0?e.displayValue:T.value;return R.length!==0?[P("div",{class:e.inputClass,style:e.inputStyle,textContent:R})]:z()}function re(){const R={ref:s,...N.value,...h.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:te};return e.multiple===!0&&(R.multiple=!0),P("input",R)}return Object.assign(o,{fieldClass:F,emitValue:g,hasValue:_,inputRef:s,innerValue:v,floatingLabel:M(()=>_.value===!0||_t(e.displayValue)),computedCounter:M(()=>{if(e.counterLabel!==void 0)return e.counterLabel(k.value);const R=e.maxFiles;return`${v.value.length}${R!==void 0?" / "+R:""} (${y.value})`}),getControlChild:()=>d("file"),getControl:()=>{const R={ref:o.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return o.editable.value===!0&&Object.assign(R,{onDragover:u,onDragleave:f,onKeydown:E,onKeyup:q}),P("div",R,[re()].concat(X()))}}),Object.assign(a,{removeAtIndex:C,removeFile:b,getNativeElement:()=>s.value}),Fn(a,"nativeEl",()=>s.value),ci(o)}});const Va={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},Qe={xs:2,sm:4,md:8,lg:16,xl:24};var ct=ae({name:"QSeparator",props:{...st,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const t=Z(),n=rt(e,t.proxy.$q),i=M(()=>e.vertical===!0?"vertical":"horizontal"),a=M(()=>` q-separator--${i.value}`),o=M(()=>e.inset!==!1?`${a.value}-${Va[e.inset]}`:""),s=M(()=>`q-separator${a.value}${o.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(n.value===!0?" q-separator--dark":"")),r=M(()=>{const l={};if(e.size!==void 0&&(l[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const c=e.spaced===!0?`${Qe.md}px`:e.spaced in Qe?`${Qe[e.spaced]}px`:e.spaced,u=e.vertical===!0?["Left","Right"]:["Top","Bottom"];l[`margin${u[0]}`]=l[`margin${u[1]}`]=c}return l});return()=>P("hr",{class:s.value,style:r.value,"aria-orientation":i.value})}});const ja={ratio:[String,Number]};function Da(e,t){return M(()=>{const n=Number(e.ratio||(t!==void 0?t.value:void 0));return isNaN(n)!==!0&&n>0?{paddingBottom:`${100/n}%`}:null})}const Wa=16/9;var qe=ae({name:"QImg",props:{...ja,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Wa},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:n}){const i=$(e.initialRatio),a=Da(e,i);let o=null,s=!1;const r=[$(null),$(_())],l=$(0),c=$(!1),u=$(!1),f=M(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),m=M(()=>({width:e.width,height:e.height})),d=M(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),h=M(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));H(()=>v(),T);function v(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function _(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function T(b){o!==null&&(clearTimeout(o),o=null),u.value=!1,b===null?(c.value=!1,r[l.value^1].value=_()):c.value=!0,r[l.value].value=b}function y({target:b}){s!==!0&&(o!==null&&(clearTimeout(o),o=null),i.value=b.naturalHeight===0?.5:b.naturalWidth/b.naturalHeight,k(b,1))}function k(b,g){s===!0||g===1e3||(b.complete===!0?N(b):o=setTimeout(()=>{o=null,k(b,g+1)},50))}function N(b){s!==!0&&(l.value=l.value^1,r[l.value].value=null,c.value=!1,u.value=!1,n("load",b.currentSrc||b.src))}function F(b){o!==null&&(clearTimeout(o),o=null),c.value=!1,u.value=!0,r[l.value].value=null,r[l.value^1].value=_(),n("error",b)}function S(b){const g=r[b].value,E={key:"img_"+b,class:d.value,style:h.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...g};return l.value===b?(E.class+=" q-img__image--waiting",Object.assign(E,{onLoad:y,onError:F})):E.class+=" q-img__image--loaded",P("div",{class:"q-img__container absolute-full",key:"img"+b},P("img",E))}function C(){return c.value!==!0?P("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},Ie(t[u.value===!0?"error":"default"])):P("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},t.loading!==void 0?t.loading():e.noSpinner===!0?void 0:[P(In,{color:e.spinnerColor,size:e.spinnerSize})])}return T(v()),Pe(()=>{s=!0,o!==null&&(clearTimeout(o),o=null)}),()=>{const b=[];return a.value!==null&&b.push(P("div",{key:"filler",style:a.value})),u.value!==!0&&(r[0].value!==null&&b.push(S(0)),r[1].value!==null&&b.push(S(1))),b.push(P(zt,{name:"q-transition--fade"},C)),P("div",{class:f.value,style:m.value,role:"img","aria-label":e.alt},b)}}});const Ha=O("h4",null,"Add Reward",-1),Ft=K({__name:"AddRewardForm",props:{edit:{type:Boolean}},setup(e){const t=be(),n=Kt(),i=$(null),a=$({id:"",name:"",points:0,image:"",claimed:!1,archived:!1}),o=$();oe(async()=>{const r=Object.fromEntries(new URLSearchParams(location.search));if(r.rewardid){const{state:l}=await globalThis.rmcore.process({});a.value=l.rewards.getById(r.rewardid)}globalThis.rmcore.process({auth:{user:!0}}).then(l=>{l.data&&(i.value=l.data)})}),Pn(()=>{const r=new URLSearchParams(location.search);r.delete("rewardid"),window.history.replaceState({},"",`${window.location.pathname}${r.size>0?"?"+r.toString():""}`),a.value={}});async function s(r){if(!!r.target){if(o.value&&i.value&&i.value.session){const l=await n.save(o.value,o.value.name,"rewards",i.value.session.user.id);l.errors?(console.error("There was an issue saving the file to the server",l.errors),t.notify({type:"negative",message:"Image Not Saved",icon:"mdi-exclamation-thick",timeout:0,closeBtn:!0,position:"bottom-right"})):(a.value.image=n.fromFullPath(l.data.fullPath),t.notify({type:"positive",message:"Image Saved",icon:"mdi-check",position:"top-right"}))}globalThis.rmcore.process({rewards:{add:a.value}}).then(l=>{l.data&&t.notify({type:"positive",message:"Reward Added",icon:"mdi-check",position:"top-right"}),l.errors&&(console.error(l),t.notify({type:"negative",message:"Reward Not Added",icon:"mdi-exclamation-thick",caption:l.errors[0].message,timeout:0,closeBtn:!0,position:"bottom-right"}))})}}return(r,l)=>(I(),Q("div",null,[Ha,O("form",{onSubmit:Vt(s,["prevent"])},[p(ue,{name:"name",outlined:"",modelValue:a.value.name,"onUpdate:modelValue":l[0]||(l[0]=c=>a.value.name=c),label:"Reward Name"},null,8,["modelValue"]),p(ue,{name:"points",outlined:"",modelValue:a.value.points,"onUpdate:modelValue":l[1]||(l[1]=c=>a.value.points=c),modelModifiers:{number:!0},label:"Reward Cost",type:"number"},null,8,["modelValue"]),a.value.image?(I(),V(ue,{key:0,name:"image",outlined:"",modelValue:a.value.image,"onUpdate:modelValue":l[2]||(l[2]=c=>a.value.image=c),label:"Image URL",disable:""},null,8,["modelValue"])):Me("",!0),p(rn,{name:"avatar",modelValue:o.value,"onUpdate:modelValue":l[3]||(l[3]=c=>o.value=c),filled:"",label:"Select an image"},null,8,["modelValue"]),p(W,{label:"Add Reward",type:"submit"}),p(ct),a.value.image?(I(),V(qe,{key:1,src:a.value.image},null,8,["src"])):Me("",!0)],32)]))}}),Qa=O("h4",null,"Add Child",-1),It=K({__name:"AddChildForm",props:{edit:{type:Boolean}},setup(e){const t=e,n=be(),{activeChild:i}=Le(),a=Kt(),o=$(null),s=$(null),r=$({});oe(()=>{t.edit&&(r.value=i.value),globalThis.rmcore.process({auth:{user:!0}}).then(c=>{c.data&&(s.value=c.data)})});async function l(c){if(!!c.target){if(o.value&&s.value&&s.value.session){const u=await a.save(o.value,o.value.name,"children",s.value.session.user.id);u.errors||u.data.error?(console.error("There was an issue saving the file to the server",u.errors,u.data.error),n.notify({type:"negative",message:"Image Not Saved",icon:"mdi-exclamation-thick",timeout:0,closeBtn:!0,position:"bottom-right"})):(r.value.avatar=a.fromFullPath(u.data.fullPath),n.notify({type:"positive",message:"Image Saved",icon:"mdi-check",position:"top-right"}))}globalThis.rmcore.process({children:{add:r.value}}).then(u=>{u.data&&n.notify({type:"positive",message:"Child Added",icon:"mdi-check",position:"top-right"}),u.errors&&(console.error(u),n.notify({type:"negative",message:"Child Not Added",icon:"mdi-exclamation-thick",caption:u.errors[0].message,timeout:0,closeBtn:!0,position:"bottom-right"}))})}}return(c,u)=>(I(),Q("div",null,[Qa,O("form",{onSubmit:Vt(l,["prevent"])},[p(ue,{name:"name",outlined:"",modelValue:r.value.name,"onUpdate:modelValue":u[0]||(u[0]=f=>r.value.name=f),label:"Name"},null,8,["modelValue"]),p(rn,{name:"avatar",modelValue:o.value,"onUpdate:modelValue":u[1]||(u[1]=f=>o.value=f),filled:"",label:"Select an image"},null,8,["modelValue"]),p(W,{label:"Add Child",type:"submit"}),p(ct),r.value.avatar?(I(),V(qe,{key:0,src:r.value.avatar},null,8,["src"])):Me("",!0)],32)]))}}),Ka=O("h3",{class:"q-mt-none"},"Settings",-1),Ua=O("p",null,"When we add some!",-1),Ja=K({__name:"Settings",setup(e){return oe(()=>{}),(t,n)=>(I(),V(se,null,{default:x(()=>[p(G,null,{default:x(()=>[Ka,Ua]),_:1})]),_:1}))}}),Ga=O("h3",{class:"q-mt-none"},"Help",-1),Ya=K({__name:"Help",setup(e){return oe(()=>{}),(t,n)=>(I(),V(se,null,{default:x(()=>[p(G,null,{default:x(()=>[Ga]),_:1})]),_:1}))}});var Fe=ae({name:"QCardActions",props:{...Nn,vertical:Boolean},setup(e,{slots:t}){const n=Ln(e),i=M(()=>`q-card__actions ${n.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>P("div",{class:i.value},Ie(t.default))}});function ut(){const e=be(),{activeChild:t}=Le(),n=$([]),i=$([]);return H(t,async(r,l)=>{r&&(n.value=await Pt(r),i.value=n.value.filter(c=>c.claimed))}),globalThis.addEventListener("pd::pipe::processed",async r=>{const l=r.detail.rewards;t.value&&l&&(l.add||l.archive||l.claim)&&(n.value=await Pt(t.value),i.value=n.value.filter(c=>c.claimed))}),{rewards:n,claimedRewards:i,claimReward:async r=>{const l={rewards:{claim:r}},c=await globalThis.rmcore.process(l);c.errors?(console.error(c.errors),e.notify({message:c.errors[0].message,caption:JSON.stringify(c.rewards),color:"negative",icon:"mdi-gift",timeout:0,closeBtn:!0,position:"bottom-right"})):e.notify({message:"Reward claimed!",color:"positive",position:"top",icon:"mdi-gift"})},unclaimReward:async r=>{const l={rewards:{unclaim:r}},c=await globalThis.rmcore.process(l);c.errors?(console.error(c.errors),e.notify({message:c.errors[0].message,caption:JSON.stringify(c.rewards),color:"negative",icon:"mdi-gift",timeout:0,closeBtn:!0,position:"bottom-right"})):e.notify({message:"Reward claimed!",color:"positive",position:"top",icon:"mdi-gift"})},archiveReward:async r=>{const l={rewards:{archive:n.value.findLast(c=>c.id===r)}};try{await rmcore.process(l),e.notify({message:"Reward Archived",caption:JSON.stringify(l),color:"positive",position:"top",icon:"mdi-trash-can"})}catch(c){console.error(c),e.notify({message:"Error archiving reward!",caption:JSON.stringify(l),color:"negative",icon:"mdi-gift",timeout:0,closeBtn:!0,position:"bottom-right"})}}}}const Pt=async e=>{try{const{state:t}=await rmcore.process({});return t.rewards.getForChild(e.id)}catch(t){return console.error(t),[]}},Xa={class:"absolute-bottom-left text-subtitle2"},ln=K({__name:"RewardCard",props:{id:{},name:{},image:{},points:{},claimed:{type:Boolean},archived:{type:Boolean}},setup(e){const{claimReward:t,unclaimReward:n,archiveReward:i}=ut(),{toggleEditRewardForm:a}=Oe(),o=e;return(s,r)=>(I(),V(se,null,{default:x(()=>[p(G,{horizontal:""},{default:x(()=>[p(qe,{src:o.image,ratio:"1"},{default:x(()=>[O("div",Xa,pe(o.name),1)]),_:1},8,["src"])]),_:1}),p(Fe,{class:"row"},{default:x(()=>[p(W,{onClick:r[0]||(r[0]=()=>L(a)(o.id))},{default:x(()=>[ve("Edit")]),_:1}),p(W,{onClick:r[1]||(r[1]=()=>L(i)(o.id)),icon:"mdi-delete"}),o.claimed?(I(),V(W,{key:0,onClick:r[2]||(r[2]=()=>L(n)(o)),icon:"mdi-currency-usd",label:`Refund ${o.points}`},null,8,["label"])):(I(),V(W,{key:1,onClick:r[3]||(r[3]=()=>L(t)(o)),icon:"mdi-currency-usd",label:`Spend ${o.points}`},null,8,["label"]))]),_:1})]),_:1}))}}),Za={class:"row"},eo=K({__name:"ClaimedGrid",setup(e){const{claimedRewards:t}=ut();return(n,i)=>L(t).length>0?(I(),V(se,{key:0},{default:x(()=>[p(G,null,{default:x(()=>[p(Wt,{class:"q-pa-none"},{default:x(()=>[p(Ht,{class:"text-h4"},{default:x(()=>[ve("Rewards Claimed")]),_:1})]),_:1})]),_:1}),p(G,null,{default:x(()=>[O("div",Za,[(I(!0),Q(ye,null,_e(L(t),a=>(I(),Q("div",{class:"col-12 col-md-3",key:a.id},[p(ln,jt(Dt(a)),null,16)]))),128))])]),_:1})]),_:1})):Me("",!0)}}),to={class:"row"},no=K({__name:"RewardGrid",setup(e){const{toggleAddRewardForm:t}=Oe(),{rewards:n}=ut();return(i,a)=>(I(),Q("section",null,[p(se,null,{default:x(()=>[p(G,null,{default:x(()=>[p(Wt,{class:"q-pa-none"},{default:x(()=>[p(Ht,{class:"text-h4"},{default:x(()=>[ve("Rewards")]),_:1}),p(W,{icon:"mdi-plus",onClick:L(t)},null,8,["onClick"])]),_:1})]),_:1}),p(G,null,{default:x(()=>[O("div",to,[(I(!0),Q(ye,null,_e(L(n).filter(o=>!o.claimed),o=>(I(),Q("div",{class:"col-12 col-md-3",key:o.id},[p(ln,jt(Dt(o)),null,16)]))),128))])]),_:1}),p(Fe,null,{default:x(()=>[p(W,{label:"Add Reward",onClick:L(t)},null,8,["onClick"])]),_:1})]),_:1}),p(eo)]))}});function io(){const{activeChild:e}=Le(),t=$(0);return globalThis.addEventListener("pd::pipe::processed",n=>{const i=n.detail.points;i&&i.add&&Nt(e).then(a=>t.value=a)}),oe(()=>Nt(e).then(n=>t.value=n)),{activeChildPoints:t}}const Nt=async e=>{const{state:t}=await rmcore.process();return t.points.getTotalFor(e.value.id)};const ao={class:"col-12 col-md-6"},oo={class:"absolute-top-right"},so={class:"absolute-bottom-left text-subtitle2"},ro={class:"text-h4"},lo={class:"text-h5"},co=K({__name:"PointCard",setup(e){const t=be(),{activeChild:n}=Le(),{activeChildPoints:i}=io(),{toggleEditChildForm:a}=Oe(),o=$(0);function s(c=1){globalThis.rmcore.process({points:{add:{points:c}}}).then(u=>{u.data&&t.notify({type:"positive",message:"Points changed: "+c,icon:"mdi-check",position:"top-right"}),u.errors&&(console.error(u),t.notify({type:"negative",message:"Points Not Added",icon:"mdi-exclamation-thick",caption:u.errors[0].message,timeout:0,closeBtn:!0,position:"bottom-right"})),dispatchEvent(new CustomEvent("points-changed"))})}function r(c){s(1)}function l(c){s(-1)}return(c,u)=>(I(),V(se,null,{default:x(()=>[p(G,{style:{"text-transform":"capitalize"}},{default:x(()=>[O("div",ao,[O("div",oo,[p(W,{onClick:L(a),class:"z-top",color:"primary",ripple:"",icon:"mdi-pencil"},null,8,["onClick"])]),p(qe,{src:L(n).avatar,"spinner-color":"white",ratio:"1"},{default:x(()=>[O("div",so,[O("p",ro,pe(L(n).name),1),O("p",lo,"Points: "+pe(L(i)),1)])]),_:1},8,["src"])])]),_:1}),p(Fe,{class:"row"},{default:x(()=>[p(Ge,{spread:"",class:"col-12"},{default:x(()=>[p(W,{padding:"md",size:"xl",icon:"mdi-plus",onClick:r}),p(ct,{vertical:""}),p(W,{padding:"md",size:"xl",icon:"mdi-minus",onClick:l})]),_:1})]),_:1}),p(Fe,{class:"row"},{default:x(()=>[p(Ge,{spread:"",class:"col-12 row"},{default:x(()=>[p(ue,{class:"col-7",outlined:"",modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=f=>o.value=f),modelModifiers:{number:!0},name:"changeAmount",label:"Custom Amount",type:"number"},null,8,["modelValue"]),p(W,{outline:"",icon:"mdi-check",onClick:u[1]||(u[1]=()=>s(o.value))})]),_:1})]),_:1})]),_:1}))}});var Lt=Qt(co,[["__scopeId","data-v-618dc7de"]]);const uo={class:"row flex-center bg-white"},fo={class:"col-xs-12 col-10"},ho={class:"q-pa-md-xl"},po=K({__name:"IndexPage",setup(e){const{commands:t,addCommand:n}=di(),{showAddRewardForm:i,showAddChildForm:a,showPointsManager:o,showEditRewardForm:s,showEditChildForm:r}=Oe(),l=$(!1),c=ot([Ya,Lt,no,Ja]),u=f=>{const m=c.value.find(d=>d.__name===f);if(m){const d=c.value.filter(h=>h.__name!==f);d.unshift(m),c.value=d}};return[{name:"Show Points",icon:"mdi-eye",command:()=>{u("PointCard")}},{name:"Show Rewards",icon:"mdi-cards",command:()=>{u("RewardGrid")}},{name:"Settings",icon:"mdi-cog",command:()=>{u("Settings")}},{name:"Help",icon:"mdi-help",command:()=>{u("Help")}}].forEach(f=>{n(f)}),(f,m)=>(I(),V(fi,{class:"q-ma-sm"},{default:x(()=>[O("section",uo,[O("div",fo,[O("div",ho,[p(Na,{commands:L(t)},null,8,["commands"])])])]),(I(!0),Q(ye,null,_e(c.value,d=>(I(),Q("div",{id:"sections",key:d.name},[(I(),V(On(d)))]))),128)),p(ge,{show:L(i)},{default:x(()=>[p(Ft,{edit:l.value},null,8,["edit"])]),_:1},8,["show"]),p(ge,{show:L(a)},{default:x(()=>[p(It,{edit:l.value},null,8,["edit"])]),_:1},8,["show"]),p(ge,{show:L(s)},{default:x(()=>[p(Ft,{edit:!0})]),_:1},8,["show"]),p(ge,{show:L(r)},{default:x(()=>[p(It,{edit:!0})]),_:1},8,["show"]),p(ge,{show:L(o)},{default:x(()=>[p(Lt,{edit:l.value},null,8,["edit"])]),_:1},8,["show"])]),_:1}))}});export{po as default};
